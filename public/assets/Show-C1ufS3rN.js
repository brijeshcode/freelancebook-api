import{B as e,C as t,D as n,G as r,I as i,J as ee,K as te,N as a,Q as o,R as s,S as ne,U as c,f as l,j as re,l as ie,m as u,t as d,u as ae,w as f,x as p,y as m,z as h}from"./index-Bi8CIbZL.js";import"./createLucideIcon-DepPGo-R.js";import{b as oe}from"./arrow-left-CKqWvwl9.js";import{b as se,c as ce}from"./send-hT1QvnBT.js";import{b as le}from"./credit-card-bOvC7KSz.js";import{b as ue}from"./download-BG7Vy9QI.js";import{b as de}from"./folder-BoRHvgil.js";import{b as g}from"./loader-circle-D6LExQqK.js";import{b as fe}from"./pencil-CSdZKH_X.js";import{b as _}from"./trash-2-6XQjUWlV.js";import{b as v}from"./triangle-alert-CtO2UswF.js";import{b as y}from"./user-Btqr-Z6a.js";const b={class:`space-y-6`},x={class:`flex flex-col sm:flex-row sm:items-center sm:justify-between`},S={class:`flex items-center space-x-3`},C={class:`text-2xl font-bold text-gray-900 dark:text-white`},w={key:1,class:`inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400`},T={class:`mt-4 sm:mt-0 flex flex-col sm:flex-row gap-2`},E={key:0,class:`flex gap-2`},D=[`disabled`],O=[`disabled`],k={key:0,class:`flex justify-center items-center py-12`},A={key:1,class:`text-center py-12`},j={class:`mt-1 text-sm text-gray-500 dark:text-gray-400`},M={key:2,class:`space-y-6`},N={class:`grid grid-cols-1 lg:grid-cols-2 gap-6`},P={class:`bg-white dark:bg-gray-800 shadow rounded-lg`},F={class:`px-4 py-5 sm:p-6`},I={class:`space-y-3`},L={class:`flex items-center`},R={class:`flex-shrink-0 h-10 w-10`},z={class:`h-10 w-10 rounded-full bg-blue-100 dark:bg-blue-900 flex items-center justify-center`},B={class:`ml-4`},V={class:`text-sm font-medium text-gray-900 dark:text-white`},pe={key:0,class:`text-sm text-gray-500 dark:text-gray-400`},me={key:0,class:`border-t border-gray-200 dark:border-gray-700 pt-3`},he={class:`flex items-center`},ge={class:`text-sm font-medium text-gray-900 dark:text-white`},_e={class:`bg-white dark:bg-gray-800 shadow rounded-lg`},ve={class:`px-4 py-5 sm:p-6`},ye={class:`space-y-3`},be={class:`flex justify-between`},xe={class:`text-sm font-medium text-gray-900 dark:text-white`},Se={key:0,class:`flex justify-between`},Ce={class:`text-sm font-medium text-gray-900 dark:text-white`},we={key:1,class:`flex justify-between`},Te={class:`text-sm font-medium text-gray-900 dark:text-white`},Ee={class:`flex justify-between`},De={class:`text-sm font-medium text-gray-900 dark:text-white`},Oe={key:2,class:`flex justify-between`},ke={class:`text-sm font-medium text-gray-900 dark:text-white`},Ae={class:`flex justify-between`},je={class:`text-sm font-medium text-gray-900 dark:text-white`},Me={key:0,class:`bg-white dark:bg-gray-800 shadow rounded-lg`},Ne={class:`px-4 py-5 sm:p-6`},Pe={class:`text-sm text-gray-700 dark:text-gray-300 whitespace-pre-wrap`},Fe={class:`bg-white dark:bg-gray-800 shadow rounded-lg`},Ie={class:`px-4 py-5 sm:p-6`},Le={class:`overflow-x-auto`},Re={class:`min-w-full divide-y divide-gray-200 dark:divide-gray-700`},ze={class:`divide-y divide-gray-200 dark:divide-gray-700`},Be={class:`px-6 py-4`},Ve={class:`text-sm font-medium text-gray-900 dark:text-white`},He={key:0,class:`text-sm text-gray-500 dark:text-gray-400`},Ue={key:1,class:`text-sm text-gray-500 dark:text-gray-400 mt-1`},We={key:2,class:`text-xs text-blue-600 dark:text-blue-400 mt-1`},Ge={class:`px-6 py-4 text-center text-sm text-gray-900 dark:text-white`},Ke={class:`px-6 py-4 text-right text-sm text-gray-900 dark:text-white`},qe={class:`px-6 py-4 text-right text-sm font-medium text-gray-900 dark:text-white`},Je={class:`bg-white dark:bg-gray-800 shadow rounded-lg`},Ye={class:`px-4 py-5 sm:p-6`},Xe={class:`max-w-sm ml-auto space-y-3`},Ze={class:`flex justify-between`},Qe={class:`text-sm font-medium text-gray-900 dark:text-white`},$e={key:0,class:`flex justify-between`},et={class:`text-sm text-gray-500 dark:text-gray-400`},tt={class:`text-sm font-medium text-gray-900 dark:text-white`},nt={class:`border-t border-gray-200 dark:border-gray-700 pt-3`},rt={class:`flex justify-between`},it={class:`text-lg font-bold text-gray-900 dark:text-white`},at={key:1,class:`text-sm text-gray-500 dark:text-gray-400 text-right`},ot={class:`bg-white dark:bg-gray-800 shadow rounded-lg`},st={class:`px-4 py-5 sm:p-6`},ct={class:`flex flex-wrap gap-3`},lt={class:`flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0`},ut={class:`inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6`},dt={class:`sm:flex sm:items-start`},ft={class:`mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-red-900/20 sm:mx-0 sm:h-10 sm:w-10`},pt={class:`mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left`},mt={class:`mt-2`},ht={class:`text-sm text-gray-500 dark:text-gray-400`},gt={class:`mt-5 sm:mt-4 sm:flex sm:flex-row-reverse`},_t=[`disabled`];var H=n({__name:`Show`,setup(n){let H=u(),U=ie(),W=re(),G=o(!1),K=o(!1),q=o(null),J=o(``),Y=o(!1),X=async()=>{G.value=!0,J.value=``;try{let e=await l.get(`/invoices/${U.params.id}`);q.value=e.data.data}catch(e){e.response?.status===404?J.value=`Invoice not found`:J.value=`Failed to load invoice`,W.error(J.value,{title:`Error`})}finally{G.value=!1}},Z=e=>e.toLocaleString(`en-US`,{minimumFractionDigits:2,maximumFractionDigits:2}),Q=e=>new Date(e).toLocaleDateString(`en-US`,{year:`numeric`,month:`short`,day:`numeric`}),vt=e=>{let t={draft:`bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400`,sent:`bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400`,paid:`bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400`,overdue:`bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400`,cancelled:`bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400`};return t[e]||t.draft},$=e=>{let t={draft:`Draft`,sent:`Sent`,paid:`Paid`,overdue:`Overdue`,cancelled:`Cancelled`};return t[e]||e},yt=e=>!e.due_date||e.status===`paid`||e.status===`cancelled`?!1:new Date(e.due_date)<new Date&&e.status!==`paid`,bt=async()=>{if(q.value){G.value=!0;try{let e=await l.patch(`/invoices/${q.value.id}/mark-as-sent`);q.value=e.data.data,W.success(`Invoice marked as sent successfully`,{title:`Success`})}catch{W.error(`Failed to mark invoice as sent`,{title:`Error`})}finally{G.value=!1}}},xt=async()=>{if(q.value)try{let e=await l.get(`/invoices/${q.value.id}/pdf`,{responseType:`blob`}),t=window.URL.createObjectURL(new Blob([e.data])),n=document.createElement(`a`);n.href=t,n.setAttribute(`download`,`${q.value.invoice_number}.pdf`),document.body.appendChild(n),n.click(),n.remove(),window.URL.revokeObjectURL(t),W.success(`Invoice PDF downloaded successfully`,{title:`Success`})}catch{W.error(`Failed to download invoice PDF`,{title:`Error`})}},St=()=>{Y.value=!0},Ct=async()=>{if(q.value){K.value=!0;try{await l.delete(`/invoices/${q.value.id}`),W.success(`Invoice deleted successfully`,{title:`Success`}),H.push(`/invoices`)}catch{W.error(`Failed to delete invoice`,{title:`Error`})}finally{K.value=!1,Y.value=!1}}};return r(()=>{X()}),(n,r)=>{let o=te(`router-link`);return i(),h(`div`,b,[f(`div`,x,[f(`div`,null,[f(`div`,S,[f(`h1`,C,c(q.value?.invoice_number||`Loading...`),1),q.value?(i(),h(`span`,{key:0,class:ne([`inline-flex px-2 py-1 text-xs font-semibold rounded-full`,vt(q.value.status)])},c($(q.value.status)),3)):m(``,!0),q.value&&yt(q.value)?(i(),h(`span`,w,` Overdue `)):m(``,!0)]),r[2]||=f(`p`,{class:`mt-1 text-sm text-gray-500 dark:text-gray-400`},` Invoice details and line items `,-1)]),f(`div`,T,[t(o,{to:`/invoices`,class:`inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-offset-gray-900 transition-colors duration-200`},{default:a(()=>[t(s(oe),{class:`h-5 w-5 mr-2`}),r[3]||=e(` Back to Invoices `,-1)]),_:1,__:[3]}),q.value?(i(),h(`div`,E,[q.value.status===`draft`?(i(),h(`button`,{key:0,onClick:bt,disabled:G.value,class:`inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 dark:bg-green-700 dark:hover:bg-green-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 dark:focus:ring-offset-gray-900 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200`},[t(s(se),{class:`h-5 w-5 mr-2`}),r[4]||=e(` Mark as Sent `,-1)],8,D)):m(``,!0),f(`button`,{onClick:xt,disabled:G.value,class:`inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-purple-600 hover:bg-purple-700 dark:bg-purple-700 dark:hover:bg-purple-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 dark:focus:ring-offset-gray-900 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200`},[t(s(ue),{class:`h-5 w-5 mr-2`}),r[5]||=e(` Download PDF `,-1)],8,O),[`draft`,`sent`].includes(q.value.status)?(i(),p(o,{key:1,to:`/invoices/${q.value.id}/edit`,class:`inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 dark:bg-blue-700 dark:hover:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-offset-gray-900 transition-colors duration-200`},{default:a(()=>[t(s(fe),{class:`h-5 w-5 mr-2`}),r[6]||=e(` Edit `,-1)]),_:1,__:[6]},8,[`to`])):m(``,!0)])):m(``,!0)])]),G.value&&!q.value?(i(),h(`div`,k,[t(s(g),{class:`h-8 w-8 animate-spin text-blue-600 dark:text-blue-400`}),r[7]||=f(`span`,{class:`ml-2 text-sm text-gray-500 dark:text-gray-400`},`Loading invoice...`,-1)])):J.value?(i(),h(`div`,A,[t(s(v),{class:`h-12 w-12 mx-auto text-red-400`}),r[8]||=f(`h3`,{class:`mt-2 text-sm font-medium text-gray-900 dark:text-white`},`Error loading invoice`,-1),f(`p`,j,c(J.value),1),f(`div`,{class:`mt-6`},[f(`button`,{onClick:X,class:`inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 dark:bg-blue-700 dark:hover:bg-blue-800 transition-colors duration-200`},` Try Again `)])])):q.value?(i(),h(`div`,M,[f(`div`,N,[f(`div`,P,[f(`div`,F,[r[9]||=f(`h3`,{class:`text-lg leading-6 font-medium text-gray-900 dark:text-white mb-4`},` Client Information `,-1),f(`div`,I,[f(`div`,L,[f(`div`,R,[f(`div`,z,[t(s(y),{class:`h-5 w-5 text-blue-600 dark:text-blue-400`})])]),f(`div`,B,[f(`div`,V,c(q.value.client?.name||`No client`),1),q.value.client?.email?(i(),h(`div`,pe,c(q.value.client.email),1)):m(``,!0)])]),q.value.project?(i(),h(`div`,me,[f(`div`,he,[t(s(de),{class:`h-5 w-5 text-gray-400 mr-2`}),f(`div`,null,[f(`div`,ge,` Project: `+c(q.value.project.name),1)])])])):m(``,!0)])])]),f(`div`,_e,[f(`div`,ve,[r[16]||=f(`h3`,{class:`text-lg leading-6 font-medium text-gray-900 dark:text-white mb-4`},` Invoice Details `,-1),f(`div`,ye,[f(`div`,be,[r[10]||=f(`span`,{class:`text-sm text-gray-500 dark:text-gray-400`},`Invoice Date:`,-1),f(`span`,xe,c(Q(q.value.invoice_date)),1)]),q.value.due_date?(i(),h(`div`,Se,[r[11]||=f(`span`,{class:`text-sm text-gray-500 dark:text-gray-400`},`Due Date:`,-1),f(`span`,Ce,c(Q(q.value.due_date)),1)])):m(``,!0),q.value.sent_at?(i(),h(`div`,we,[r[12]||=f(`span`,{class:`text-sm text-gray-500 dark:text-gray-400`},`Sent Date:`,-1),f(`span`,Te,c(Q(q.value.sent_at)),1)])):m(``,!0),f(`div`,Ee,[r[13]||=f(`span`,{class:`text-sm text-gray-500 dark:text-gray-400`},`Currency:`,-1),f(`span`,De,c(q.value.currency),1)]),q.value.exchange_rate===1?m(``,!0):(i(),h(`div`,Oe,[r[14]||=f(`span`,{class:`text-sm text-gray-500 dark:text-gray-400`},`Exchange Rate:`,-1),f(`span`,ke,c(q.value.exchange_rate),1)])),f(`div`,Ae,[r[15]||=f(`span`,{class:`text-sm text-gray-500 dark:text-gray-400`},`Created:`,-1),f(`span`,je,c(Q(q.value.created_at)),1)])])])])]),q.value.notes?(i(),h(`div`,Me,[f(`div`,Ne,[r[17]||=f(`h3`,{class:`text-lg leading-6 font-medium text-gray-900 dark:text-white mb-3`},` Notes `,-1),f(`p`,Pe,c(q.value.notes),1)])])):m(``,!0),f(`div`,Fe,[f(`div`,Ie,[r[19]||=f(`h3`,{class:`text-lg leading-6 font-medium text-gray-900 dark:text-white mb-4`},` Invoice Items `,-1),f(`div`,Le,[f(`table`,Re,[r[18]||=f(`thead`,null,[f(`tr`,null,[f(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},` Description `),f(`th`,{class:`px-6 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},` Quantity `),f(`th`,{class:`px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},` Unit Price `),f(`th`,{class:`px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},` Total `)])],-1),f(`tbody`,ze,[(i(!0),h(ae,null,ee(q.value.items,e=>(i(),h(`tr`,{key:e.id,class:`hover:bg-gray-50 dark:hover:bg-gray-700/50`},[f(`td`,Be,[f(`div`,null,[f(`div`,Ve,c(e.description),1),e.service_period_start&&e.service_period_end?(i(),h(`div`,He,` Service Period: `+c(Q(e.service_period_start))+` - `+c(Q(e.service_period_end)),1)):m(``,!0),e.notes?(i(),h(`div`,Ue,c(e.notes),1)):m(``,!0),e.service?(i(),h(`div`,We,` Service: `+c(e.service.title),1)):m(``,!0)])]),f(`td`,Ge,c(e.quantity),1),f(`td`,Ke,c(q.value.currency)+` `+c(Z(e.unit_price)),1),f(`td`,qe,c(q.value.currency)+` `+c(Z(e.total_price)),1)]))),128))])])])])]),f(`div`,Je,[f(`div`,Ye,[r[22]||=f(`h3`,{class:`text-lg leading-6 font-medium text-gray-900 dark:text-white mb-4`},` Invoice Summary `,-1),f(`div`,Xe,[f(`div`,Ze,[r[20]||=f(`span`,{class:`text-sm text-gray-500 dark:text-gray-400`},`Subtotal:`,-1),f(`span`,Qe,c(q.value.currency)+` `+c(Z(q.value.subtotal)),1)]),q.value.tax_amount>0?(i(),h(`div`,$e,[f(`span`,et,c(q.value.tax_label||`Tax`)+` (`+c(q.value.tax_rate)+`%): `,1),f(`span`,tt,c(q.value.currency)+` `+c(Z(q.value.tax_amount)),1)])):m(``,!0),f(`div`,nt,[f(`div`,rt,[r[21]||=f(`span`,{class:`text-base font-medium text-gray-900 dark:text-white`},`Total:`,-1),f(`span`,it,c(q.value.currency)+` `+c(Z(q.value.total_amount)),1)])]),q.value.exchange_rate===1?m(``,!0):(i(),h(`div`,at,` Base Currency: `+c(Z(q.value.total_amount_base_currency)),1))])])]),f(`div`,ot,[f(`div`,st,[r[27]||=f(`h3`,{class:`text-lg leading-6 font-medium text-gray-900 dark:text-white mb-4`},` Quick Actions `,-1),f(`div`,ct,[t(o,{to:`/invoices/create?copy=${q.value.id}`,class:`inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-offset-gray-900 transition-colors duration-200`},{default:a(()=>[t(s(ce),{class:`h-5 w-5 mr-2`}),r[23]||=e(` Copy Invoice `,-1)]),_:1,__:[23]},8,[`to`]),t(o,{to:`/payments/create?client_id=${q.value.client_id}`,class:`inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 dark:bg-green-700 dark:hover:bg-green-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 dark:focus:ring-offset-gray-900 transition-colors duration-200`},{default:a(()=>[t(s(le),{class:`h-5 w-5 mr-2`}),r[24]||=e(` Record Payment `,-1)]),_:1,__:[24]},8,[`to`]),t(o,{to:`/clients/${q.value.client_id}`,class:`inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-offset-gray-900 transition-colors duration-200`},{default:a(()=>[t(s(y),{class:`h-5 w-5 mr-2`}),r[25]||=e(` View Client `,-1)]),_:1,__:[25]},8,[`to`]),q.value.status===`draft`?(i(),h(`button`,{key:0,onClick:St,class:`inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-700 dark:bg-red-700 dark:hover:bg-red-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 dark:focus:ring-offset-gray-900 transition-colors duration-200`},[t(s(_),{class:`h-5 w-5 mr-2`}),r[26]||=e(` Delete Invoice `,-1)])):m(``,!0)])])])])):m(``,!0),Y.value?(i(),h(`div`,{key:3,class:`fixed inset-0 z-50 overflow-y-auto`,onClick:r[1]||=d(e=>Y.value=!1,[`self`])},[f(`div`,lt,[r[29]||=f(`div`,{class:`fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity`},null,-1),f(`div`,ut,[f(`div`,dt,[f(`div`,ft,[t(s(v),{class:`h-6 w-6 text-red-600 dark:text-red-400`})]),f(`div`,pt,[r[28]||=f(`h3`,{class:`text-lg leading-6 font-medium text-gray-900 dark:text-white`},` Delete Invoice `,-1),f(`div`,mt,[f(`p`,ht,` Are you sure you want to delete invoice "`+c(q.value?.invoice_number)+`"? This action cannot be undone and will remove the amount from the client's balance. `,1)])])]),f(`div`,gt,[f(`button`,{onClick:Ct,disabled:K.value,class:`w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200`},[K.value?(i(),p(s(g),{key:0,class:`h-4 w-4 animate-spin mr-2`})):m(``,!0),e(` `+c(K.value?`Deleting...`:`Delete`),1)],8,_t),f(`button`,{onClick:r[0]||=e=>Y.value=!1,class:`mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 dark:border-gray-600 shadow-sm px-4 py-2 bg-white dark:bg-gray-800 text-base font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:mt-0 sm:w-auto sm:text-sm transition-colors duration-200`},` Cancel `)])])])])):m(``,!0)])}}}),U=H;export{U as default};