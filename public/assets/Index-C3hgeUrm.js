import{A as e,B as t,C as n,D as ee,G as r,I as i,J as te,K as ne,L as a,N as o,O as s,P as c,Q as l,R as u,S as d,U as f,f as p,j as re,m,r as h,s as ie,t as ae,u as oe,w as g,x as _,y as v,z as y}from"./index-Bi8CIbZL.js";import"./createLucideIcon-DepPGo-R.js";import{b as se,c as ce,d as le}from"./search-DuM0IVTN.js";import{b as ue}from"./eye-BkavhDxY.js";import{b}from"./loader-circle-D6LExQqK.js";import{b as de,c as fe}from"./play-Cl3FxKWb.js";import{b as pe}from"./pencil-CSdZKH_X.js";import{b as x}from"./plus-CqWY6zRn.js";import{b as S}from"./settings-Dk0hqCTf.js";import{b as C}from"./trash-2-6XQjUWlV.js";import{b as w}from"./triangle-alert-CtO2UswF.js";const T={class:`space-y-6`},E={class:`flex flex-col sm:flex-row sm:items-center sm:justify-between`},D={class:`mt-4 sm:mt-0`},O={class:`bg-white dark:bg-gray-800 shadow rounded-lg p-4`},k={class:`grid grid-cols-1 md:grid-cols-5 gap-4`},A={class:`md:col-span-2`},j={class:`relative`},M={class:`bg-white dark:bg-gray-800 shadow rounded-lg overflow-hidden`},N={key:0,class:`p-8 text-center`},P={key:1,class:`p-8 text-center`},F={class:`mt-1 text-sm text-gray-500 dark:text-gray-400`},I={key:0,class:`mt-6`},L={key:2,class:`overflow-x-auto`},R={class:`min-w-full divide-y divide-gray-200 dark:divide-gray-700`},z={class:`bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700`},B={class:`px-6 py-4 whitespace-nowrap`},me={class:`flex items-center`},he={class:`flex-shrink-0 h-10 w-10`},ge={class:`h-10 w-10 rounded-full bg-blue-100 dark:bg-blue-900 flex items-center justify-center`},_e={class:`ml-4`},ve={class:`text-sm font-medium text-gray-900 dark:text-white`},ye={class:`text-sm text-gray-500 dark:text-gray-400`},be={key:0,class:`ml-2`},xe={class:`px-6 py-4 whitespace-nowrap`},Se={class:`text-sm text-gray-900 dark:text-white`},Ce={class:`text-sm text-gray-500 dark:text-gray-400`},we={class:`px-6 py-4 whitespace-nowrap`},Te={class:`text-sm`},Ee={class:`text-gray-900 dark:text-white`},De={key:0,class:`text-gray-500 dark:text-gray-400`},Oe={class:`px-6 py-4 whitespace-nowrap`},ke={class:`text-sm`},Ae={class:`text-gray-900 dark:text-white capitalize`},V={key:0,class:`text-gray-500 dark:text-gray-400`},je={key:1,class:`text-gray-500 dark:text-gray-400`},Me={class:`px-6 py-4 whitespace-nowrap`},Ne={class:`flex flex-col space-y-1`},Pe={key:0,class:`inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400`},Fe={class:`px-6 py-4 whitespace-nowrap text-right text-sm font-medium`},Ie={class:`flex items-center justify-end space-x-2`},Le=[`onClick`,`title`],Re=[`onClick`],ze={key:3,class:`bg-white dark:bg-gray-800 px-4 py-3 border-t border-gray-200 dark:border-gray-700 sm:px-6`},Be={class:`flex items-center justify-between`},Ve={class:`flex-1 flex justify-between sm:hidden`},He=[`disabled`],Ue=[`disabled`],We={class:`hidden sm:flex-1 sm:flex sm:items-center sm:justify-between`},Ge={class:`text-sm text-gray-700 dark:text-gray-300`},Ke={class:`font-medium`},qe={class:`font-medium`},Je={class:`font-medium`},Ye={class:`relative z-0 inline-flex rounded-md shadow-sm -space-x-px`},Xe=[`disabled`],Ze=[`disabled`],Qe={class:`flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0`},$e={class:`inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6`},et={class:`sm:flex sm:items-start`},tt={class:`mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-red-900/20 sm:mx-0 sm:h-10 sm:w-10`},nt={class:`mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left`},rt={class:`mt-2`},it={class:`text-sm text-gray-500 dark:text-gray-400`},at={class:`mt-5 sm:mt-4 sm:flex sm:flex-row-reverse`},ot=[`disabled`];var H=ee({__name:`Index`,setup(ee){m();let H=re(),U=l(!1),W=l(!1),G=l([]),K=l(null),q=l(!1),J=l(null),Y=l(null),X=c({search:``,status:``,frequency:``,per_page:15}),Z=async(e=1)=>{U.value=!0;try{let t=new URLSearchParams({page:e.toString(),per_page:X.per_page.toString()});X.search&&t.append(`search`,X.search),X.status&&t.append(`status`,X.status),X.frequency&&t.append(`frequency`,X.frequency);let n=await p.get(`/services?${t}`);G.value=n.data.data,K.value=n.data.pagination}catch{H.error(`Failed to load services`,{title:`Error`})}finally{U.value=!1}},st=()=>{Y.value&&clearTimeout(Y.value),Y.value=setTimeout(()=>{Z(1)},300)},Q=e=>{e>=1&&K.value&&e<=K.value.last_page&&Z(e)},$=e=>e.toLocaleString(`en-US`,{minimumFractionDigits:2,maximumFractionDigits:2}),ct=e=>new Date(e).toLocaleDateString(`en-US`,{year:`numeric`,month:`short`,day:`numeric`}),lt=e=>{let t={draft:`bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400`,active:`bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400`,paused:`bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400`,completed:`bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-400`,cancelled:`bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400`,pending_approval:`bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400`};return t[e]||t.draft},ut=e=>{let t={draft:`Draft`,active:`Active`,paused:`Paused`,completed:`Completed`,cancelled:`Cancelled`,pending_approval:`Pending Approval`};return t[e]||e},dt=async e=>{try{let t=await p.patch(`/services/${e.id}/toggle-status`),n=G.value.findIndex(t=>t.id===e.id);n!==-1&&(G.value[n]=t.data.data),H.success(`Service ${t.data.data.is_active?`activated`:`deactivated`} successfully`,{title:`Success`})}catch{H.error(`Failed to toggle service status`,{title:`Error`})}},ft=e=>{J.value=e,q.value=!0},pt=async()=>{if(J.value){W.value=!0;try{await p.delete(`/services/${J.value.id}`),H.success(`Service deleted successfully`,{title:`Success`}),q.value=!1,J.value=null,await Z(K.value?.current_page||1)}catch{H.error(`Failed to delete service`,{title:`Error`})}finally{W.value=!1}}};return r(()=>{Z()}),(ee,r)=>{let c=ne(`router-link`);return i(),y(`div`,T,[g(`div`,E,[r[11]||=g(`div`,null,[g(`h1`,{class:`text-2xl font-bold text-gray-900 dark:text-white`},`Services`),g(`p`,{class:`mt-1 text-sm text-gray-500 dark:text-gray-400`},` Manage your services and recurring billing `)],-1),g(`div`,D,[n(c,{to:`/services/create`,class:`inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 dark:bg-blue-700 dark:hover:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-offset-gray-900 transition-colors duration-200`},{default:o(()=>[n(u(x),{class:`h-5 w-5 mr-2`}),r[10]||=t(` Add Service `,-1)]),_:1,__:[10]})])]),g(`div`,O,[g(`div`,k,[g(`div`,A,[r[12]||=g(`label`,{for:`search`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Search Services `,-1),g(`div`,j,[s(g(`input`,{id:`search`,"onUpdate:modelValue":r[0]||=e=>X.search=e,type:`text`,placeholder:`Search by title...`,class:`block w-full px-3 py-2 pl-10 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 sm:text-sm transition-colors duration-200`,onInput:st},null,544),[[ie,X.search]]),n(u(se),{class:`absolute left-3 top-2.5 h-5 w-5 text-gray-400`})])]),g(`div`,null,[r[14]||=g(`label`,{for:`status`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Status `,-1),s(g(`select`,{id:`status`,"onUpdate:modelValue":r[1]||=e=>X.status=e,class:`block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm transition-colors duration-200`,onChange:Z},r[13]||=[e(`<option value="">All Status</option><option value="draft">Draft</option><option value="active">Active</option><option value="paused">Paused</option><option value="completed">Completed</option><option value="cancelled">Cancelled</option><option value="pending_approval">Pending Approval</option>`,7)],544),[[h,X.status]])]),g(`div`,null,[r[16]||=g(`label`,{for:`frequency`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Frequency `,-1),s(g(`select`,{id:`frequency`,"onUpdate:modelValue":r[2]||=e=>X.frequency=e,class:`block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm transition-colors duration-200`,onChange:Z},r[15]||=[e(`<option value="">All Frequencies</option><option value="one-time">One-time</option><option value="weekly">Weekly</option><option value="monthly">Monthly</option><option value="quarterly">Quarterly</option><option value="half-yearly">Half-yearly</option><option value="yearly">Yearly</option>`,7)],544),[[h,X.frequency]])]),g(`div`,null,[r[18]||=g(`label`,{for:`per-page`,class:`block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1`},` Per Page `,-1),s(g(`select`,{id:`per-page`,"onUpdate:modelValue":r[3]||=e=>X.per_page=e,class:`block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white sm:text-sm transition-colors duration-200`,onChange:Z},r[17]||=[g(`option`,{value:`15`},`15`,-1),g(`option`,{value:`25`},`25`,-1),g(`option`,{value:`50`},`50`,-1),g(`option`,{value:`100`},`100`,-1)],544),[[h,X.per_page]])])])]),g(`div`,M,[U.value?(i(),y(`div`,N,[n(u(b),{class:`h-8 w-8 animate-spin mx-auto text-blue-600 dark:text-blue-400`}),r[19]||=g(`p`,{class:`mt-2 text-sm text-gray-500 dark:text-gray-400`},`Loading services...`,-1)])):G.value.length===0?(i(),y(`div`,P,[n(u(S),{class:`h-12 w-12 mx-auto text-gray-400`}),r[21]||=g(`h3`,{class:`mt-2 text-sm font-medium text-gray-900 dark:text-white`},`No services found`,-1),g(`p`,F,f(X.search?`Try adjusting your search criteria.`:`Get started by creating your first service.`),1),X.search?v(``,!0):(i(),y(`div`,I,[n(c,{to:`/services/create`,class:`inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 dark:bg-blue-700 dark:hover:bg-blue-800 transition-colors duration-200`},{default:o(()=>[n(u(x),{class:`h-5 w-5 mr-2`}),r[20]||=t(` Add Your First Service `,-1)]),_:1,__:[20]})]))])):(i(),y(`div`,L,[g(`table`,R,[r[22]||=g(`thead`,{class:`bg-gray-50 dark:bg-gray-700`},[g(`tr`,null,[g(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},` Service `),g(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},` Client/Project `),g(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},` Pricing `),g(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},` Billing `),g(`th`,{class:`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},` Status `),g(`th`,{class:`px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider`},` Actions `)])],-1),g(`tbody`,z,[(i(!0),y(oe,null,te(G.value,e=>(i(),y(`tr`,{key:e.id,class:`hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200`},[g(`td`,B,[g(`div`,me,[g(`div`,he,[g(`div`,ge,[n(u(S),{class:`h-5 w-5 text-blue-600 dark:text-blue-400`})])]),g(`div`,_e,[g(`div`,ve,f(e.title),1),g(`div`,ye,[t(` ID: `+f(e.id)+` `,1),e.has_tax?(i(),y(`span`,be,` â€¢ `+f(e.tax_name)+` `+f(e.tax_rate)+`% `,1)):v(``,!0)])])])]),g(`td`,xe,[g(`div`,Se,f(e.client?.name||`No client`),1),g(`div`,Ce,f(e.project?.name||`No project`),1)]),g(`td`,we,[g(`div`,Te,[g(`div`,Ee,f(e.currency)+` `+f($(e.base_amount)),1),e.has_tax?(i(),y(`div`,De,` Total: `+f(e.currency)+` `+f($(e.total_amount)),1)):v(``,!0)])]),g(`td`,Oe,[g(`div`,ke,[g(`div`,Ae,f(e.frequency.replace(`-`,` `)),1),e.next_billing_date?(i(),y(`div`,V,` Next: `+f(ct(e.next_billing_date)),1)):v(``,!0),e.billing_count>0?(i(),y(`div`,je,` Billed `+f(e.billing_count)+` times `,1)):v(``,!0)])]),g(`td`,Me,[g(`div`,Ne,[g(`span`,{class:d([`inline-flex px-2 py-1 text-xs font-semibold rounded-full`,lt(e.status)])},f(ut(e.status)),3),e.is_active?v(``,!0):(i(),y(`span`,Pe,` Inactive `))])]),g(`td`,Fe,[g(`div`,Ie,[n(c,{to:`/services/${e.id}`,class:`text-blue-600 dark:text-blue-400 hover:text-blue-900 dark:hover:text-blue-300 transition-colors duration-200`,title:`View Service`},{default:o(()=>[n(u(ue),{class:`h-4 w-4`})]),_:2},1032,[`to`]),g(`button`,{onClick:t=>dt(e),class:d([e.is_active?`text-yellow-600 dark:text-yellow-400 hover:text-yellow-900 dark:hover:text-yellow-300`:`text-green-600 dark:text-green-400 hover:text-green-900 dark:hover:text-green-300`,`transition-colors duration-200`]),title:e.is_active?`Deactivate Service`:`Activate Service`},[(i(),_(a(e.is_active?u(fe):u(de)),{class:`h-4 w-4`}))],10,Le),n(c,{to:`/services/${e.id}/edit`,class:`text-indigo-600 dark:text-indigo-400 hover:text-indigo-900 dark:hover:text-indigo-300 transition-colors duration-200`,title:`Edit Service`},{default:o(()=>[n(u(pe),{class:`h-4 w-4`})]),_:2},1032,[`to`]),g(`button`,{onClick:t=>ft(e),class:`text-red-600 dark:text-red-400 hover:text-red-900 dark:hover:text-red-300 transition-colors duration-200`,title:`Delete Service`},[n(u(C),{class:`h-4 w-4`})],8,Re)])])]))),128))])])])),K.value&&K.value.total>0?(i(),y(`div`,ze,[g(`div`,Be,[g(`div`,Ve,[g(`button`,{onClick:r[4]||=e=>Q(K.value.current_page-1),disabled:K.value.current_page<=1,class:`relative inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200`},` Previous `,8,He),g(`button`,{onClick:r[5]||=e=>Q(K.value.current_page+1),disabled:K.value.current_page>=K.value.last_page,class:`ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200`},` Next `,8,Ue)]),g(`div`,We,[g(`div`,null,[g(`p`,Ge,[r[23]||=t(` Showing `,-1),g(`span`,Ke,f(K.value.from),1),r[24]||=t(` to `,-1),g(`span`,qe,f(K.value.to),1),r[25]||=t(` of `,-1),g(`span`,Je,f(K.value.total),1),r[26]||=t(` results `,-1)])]),g(`div`,null,[g(`nav`,Ye,[g(`button`,{onClick:r[6]||=e=>Q(K.value.current_page-1),disabled:K.value.current_page<=1,class:`relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-sm font-medium text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200`},[n(u(le),{class:`h-5 w-5`})],8,Xe),g(`button`,{onClick:r[7]||=e=>Q(K.value.current_page+1),disabled:K.value.current_page>=K.value.last_page,class:`relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-sm font-medium text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200`},[n(u(ce),{class:`h-5 w-5`})],8,Ze)])])])])])):v(``,!0)]),q.value?(i(),y(`div`,{key:0,class:`fixed inset-0 z-50 overflow-y-auto`,onClick:r[9]||=ae(e=>q.value=!1,[`self`])},[g(`div`,Qe,[r[28]||=g(`div`,{class:`fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity`},null,-1),g(`div`,$e,[g(`div`,et,[g(`div`,tt,[n(u(w),{class:`h-6 w-6 text-red-600 dark:text-red-400`})]),g(`div`,nt,[r[27]||=g(`h3`,{class:`text-lg leading-6 font-medium text-gray-900 dark:text-white`},` Delete Service `,-1),g(`div`,rt,[g(`p`,it,` Are you sure you want to delete "`+f(J.value?.title)+`"? This action cannot be undone. `,1)])])]),g(`div`,at,[g(`button`,{onClick:pt,disabled:W.value,class:`w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200`},[W.value?(i(),_(u(b),{key:0,class:`h-4 w-4 animate-spin mr-2`})):v(``,!0),t(` `+f(W.value?`Deleting...`:`Delete`),1)],8,ot),g(`button`,{onClick:r[8]||=e=>q.value=!1,class:`mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 dark:border-gray-600 shadow-sm px-4 py-2 bg-white dark:bg-gray-800 text-base font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:mt-0 sm:w-auto sm:text-sm transition-colors duration-200`},` Cancel `)])])])])):v(``,!0)])}}}),U=H;export{U as default};